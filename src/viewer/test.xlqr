<?xml version="1.0" encoding="utf-8" ?>
<document	xmlns="http://corentin-lebail.eu/libqt4report"
			xmlns:lqr="http://corentin-lebail.eu/libqt4report"
			xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
			xsi:schemaLocation="http://corentin-lebail.eu/libqt4report libqt4report.xsd"
			pageWidth="210" pageHeight="297" unit="mm">
	<fonts>
		<font id="font1" family="arial" size="9" />
		<font id="fontColumnName" family="arial" size="14" style="StyleItalic" />
		<font id="fontTitre" family="arial" size="40" weight="Black" />
		<font id="fontTotal" family="arial" size="10" weight="Bold" />
		<font id="fontTotalCde" family="arial" size="9" weight="Bold" />
	</fonts>
	<database>
		<params>
			<param id="fromCommande" /> 
			<param id="toCommande" /> 
		</params>
		<connection driver="QMYSQL" host="127.0.0.1" userName="test" password="" dbName="test" />
		<query>
			<![CDATA[SELECT commande, numeroLigne, article, quantite, prixUnitaireHT, tauxTva, CURDATE() as td FROM ligneCommandes WHERE commande BETWEEN :fromCommande AND :toCommande ORDER BY commande, numeroLigne]]>
		</query>
		<dbFields>
			<dbField id="dbCommande" fieldName="commande" dataType="integer" />
			<dbField id="dbNumeroLigne" fieldName="numeroLigne" dataType="integer" />
			<dbField id="dbArticle" fieldName="article" dataType="string" />
			<dbField id="dbQte" fieldName="quantite" dataType="integer" />
			<dbField id="dbPuHT" fieldName="prixUnitaireHT" dataType="real" />
			<dbField id="dbTTva" fieldName="tauxTva" dataType="real" />
			<dbField id="dbTD" fieldName="td" dataType="date" />
		</dbFields>
	</database>
	<groups>
		<group id="grCde" refer="dbCommande" />
	</groups>
	<fields>
		<field xsi:type="calculatedFieldObject" id="cMntHT" dataType="real">
			<expression><![CDATA[${dbPuHT}*${dbQte}]]></expression>
		</field>
		<field xsi:type="calculatedFieldObject" id="cMntTTC" dataType="real">
			<expression><![CDATA[${cMntHT}*(1+${dbTTva})]]></expression>
		</field>
		<field xsi:type="totalFieldObject" id="tTotalHT" operation="sum" fieldId="cMntHT" dataType="real" />
		<field xsi:type="totalFieldObject" id="tTotalTTC" operation="sum" fieldId="cMntTTC" dataType="real" />
		<field xsi:type="totalFieldObject" id="tTotalHTCde" operation="sum" fieldId="cMntHT" dataType="real" resetOn="grCde" />
		<field xsi:type="totalFieldObject" id="tTotalTTCCde" operation="sum" fieldId="cMntTTC" dataType="real" resetOn="grCde" />
		<field xsi:type="totalFieldObject" id="tNbCde" operation="count" fieldId="dbCommande" dataType="integer" accumulateOn="grCde" />
	</fields>
	<body>
		<pageHeader>
			<item xsi:type="textFixedObject" id="cdeTitle" fontId="fontColumnName" x="5" y="5" value="Cde." />
			<item xsi:type="textFixedObject" id="codeTitle" fontId="fontColumnName" x="15" y="5" value="Article" />
			<item xsi:type="textFixedObject" id="nomTitle" fontId="fontColumnName" x="50" y="5" value="QuantitÃ©" align="end" />
			<item xsi:type="textFixedObject" id="puHTTitle" fontId="fontColumnName" x="100" y="5" value="Prix unitaire HT" align="end" />
			<item xsi:type="textFixedObject" id="tTvaTitle" fontId="fontColumnName" x="130" y="5" value="Taux de tva" align="end" />
			<item xsi:type="textFixedObject" id="mntHTTitle" fontId="fontColumnName" x="170" y="5" value="Mnt. HT" align="end" />
			<item xsi:type="textFixedObject" id="mntTTCTitle" fontId="fontColumnName" x="190" y="5" value="Mnt. TTC" align="end" />
			<item xsi:type="lineObject" id="lineH1" x="5" y="6" width="200" height="0" />
		</pageHeader>
		 <docHeader>
			<item xsi:type="textFixedObject" id="title" fontId="fontTitre" x="105" y="10" value="Titre" align="middle" color="#FF0000" />
			<item xsi:type="textFieldObject" id="titleDate" fontId="fontTitre" x="20" y="10" fieldId="dbTD" color="#0000FF" />
		</docHeader>
		<docBody>
			<item xsi:type="textFieldObject" id="cde" fontId="font1" x="5" y="5" fieldId="dbCommande" />
			<item xsi:type="textFieldObject" id="code" fontId="font1" x="15" y="5" fieldId="dbArticle" />
			<item xsi:type="textFieldObject" id="nom" fontId="font1" x="50" y="5" fieldId="dbQte" align="end" />
			<item xsi:type="textFieldObject" id="puHt" fontId="font1" x="100" y="5" fieldId="dbPuHT" align="end" format="rf2" />
			<item xsi:type="textFieldObject" id="tTva" fontId="font1" x="130" y="5" fieldId="dbTTva" align="end" format="rf3" />
			<item xsi:type="textFieldObject" id="tMntHT" fontId="font1" x="170" y="5" fieldId="cMntHT" align="end" format="rf2" />
			<item xsi:type="textFieldObject" id="tMntTTC" fontId="font1" x="190" y="5" fieldId="cMntTTC" align="end" format="rf2" />
		</docBody>
		<groupFooters>
			<groupFooter groupId="grCde">
				<item xsi:type="textFixedObject" id="totalTitleCde" fontId="fontTotalCde" x="145" y="5" value="Total :" align="end" />
				<item xsi:type="textFieldObject" id="totalHTCde" fontId="fontTotalCde" x="170" y="5" fieldId="tTotalHTCde"  align="end" format="rf2" />
				<item xsi:type="textFieldObject" id="totalTTCCde" fontId="fontTotalCde" x="190" y="5" fieldId="tTotalTTCCde"  align="end" format="rf2" />
			</groupFooter>
		</groupFooters>
		<docFooter>
			<item xsi:type="textFixedObject" id="totalTitle" fontId="fontTotal" x="145" y="5" value="Total :" align="end" />
			<item xsi:type="textFieldObject" id="totalHT" fontId="fontTotal" x="170" y="5" fieldId="tTotalHT"  align="end" format="rf2" />
			<item xsi:type="textFieldObject" id="totalTTC" fontId="fontTotal" x="190" y="5" fieldId="tTotalTTC"  align="end" format="rf2" />
		</docFooter>
		<pageFooter>
			<item xsi:type="rectObject" id="rectFooter" x="2" y="2" width="206" height="5" color="#00FF00" /> 
			<item xsi:type="textFixedObject" id="pageFooter" fontId="font1" x="5" y="5" value="pageFooter" />
		</pageFooter>
	</body>
</document>